# 비커넥트랩 - 관리자 페이지별 기능 명세

## 페이지 맵

```
apps/admin
├── /login                          # 관리자 로그인
├── /register                       # 관리자 가입 신청
├── /accounts                       # 관리자 계정 관리
├── /programs                       # 프로그램 목록
├── /programs/new                   # 프로그램 생성
├── /programs/[id]                  # 프로그램 관리(수정)
├── /programs/[id]/evaluate         # 프로그램 참가자 평가
├── /announcements                  # 공고 목록
├── /announcements/new              # 공고 생성
├── /announcements/[id]/edit        # 공고 수정
├── /applications                   # 지원서 목록
├── /applications/[id]              # 지원서 상세
├── /talents                        # 청년 인재 목록
├── /talents/[id]                   # 청년 인재 상세
├── /contents                       # 인터뷰 목록
├── /contents/new                   # 인터뷰 등록
└── /contents/[id]/edit             # 인터뷰 수정
```

---

## 1. 관리자 가입 / 로그인

### 1.1 로그인 (`/login`)

- 이메일 + 비밀번호 방식만 지원 (소셜 로그인 없음)
- 승인 완료(approved) 관리자만 로그인 가능
- 대기 상태로 로그인 시도 시: "가입되지 않은 이메일 주소입니다."

### 1.2 가입 신청 (`/register`)

**입력 필드 (모두 필수):**

- 이메일
- 비밀번호
- 이름
- 휴대폰 번호

**가입 후:** 상태 = `대기`, 기존 관리자 승인 필요

### 1.3 관리자 계정 관리 (`/accounts`)

**목록 컬럼:**
| 컬럼 | 설명 |
|------|------|
| 이름 | |
| 이메일 | |
| 휴대폰 번호 | |
| 조직 | 기본값: 비커넥트랩 |
| 가입 상태 | 대기 / 완료 |
| 가입 신청 일시 | |
| 가입 승인 일시 | |
| 승인한 관리자 | |
| 승인하기 버튼 | 대기 상태일 때만 |
| 삭제하기 버튼 | 완료 상태일 때만 |

**승인:** 확인 다이얼로그 → 상태 `완료`로 변경 + 토스트

**삭제 정책:**

- 다른 관리자 삭제 가능, 자기 자신 삭제 불가
- 최소 1명 관리자 유지 필수
- 삭제 후 동일 이메일 재가입 가능

**API:**
| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/admin/auth/login` | 관리자 로그인 |
| POST | `/admin/auth/register` | 관리자 가입 신청 |
| GET | `/admin/accounts` | 관리자 목록 |
| PATCH | `/admin/accounts/:id/approve` | 가입 승인 |
| DELETE | `/admin/accounts/:id` | 관리자 삭제 |

---

## 2. 프로그램 관리

### 2.1 프로그램 목록 (`/programs`)

**표시:** "총 {count}" + 목록

**목록 컬럼:**
| 컬럼 | 설명 |
|------|------|
| 프로그램명 | 클릭 시 관리 화면 이동 |
| 활동 지역 | 시/도 + 시/군/구 |
| 프로그램 상태 | 예정/진행중/종료 (자동 산정) |
| 활동 기간 | 시작일 ~ 종료일 |
| 등록 일시 | |
| 작성자 | |
| 삭제 버튼 | |

**정렬:** 등록일시 내림차순

**삭제:** 확인 다이얼로그 (연결 공고 함께 삭제 경고) → 토스트

### 2.2 프로그램 생성 (`/programs/new`)

**입력 필드:**
| 필드 | 필수 | 타입 |
|------|------|------|
| 프로그램명 | O | 텍스트 |
| 주최 | O | 텍스트 |
| 주관 | O | 텍스트 |
| 활동 기간 | O | 시작일/종료일 (데이트 피커, KST) |
| 활동 지역 - 시/도 | O | 드롭다운 (17개 광역자치단체) |
| 활동 지역 - 시/군/구 | 조건부 | 시/도 선택에 따라 동적 변경 |
| 혜택 정보 | X | 체크박스 복수 선택 |

**혜택 옵션:** 숙소 제공, 활동비 지급, 지역/직무 교육, 전문가/임직원 멘토링, 수료증 및 인증서, 인턴십 기회, 왕복 교통비

**버튼:**

- 취소하기 → 이전 화면
- 저장하기 → 필수값 검증 → 성공 시 목록으로 이동

### 2.3 프로그램 관리/수정 (`/programs/[id]`)

**3개 영역:**

**a. 프로그램 내용:**

- 생성 화면과 동일 입력 필드 (기존 값 채움)
- 상단에 프로그램 상태 칩 표시
- 저장하기 버튼

**b. 공고 목록:**
| 컬럼 | 설명 |
|------|------|
| 공고명 | |
| 직무 | |
| 모집상태 | |
| 지원자 수 | 클릭 시 새탭으로 지원서 목록 (해당 공고 필터) |
| 최종합격자 수 | |

**c. 참가자 목록:**

- 설명: "공고에 최종 합격한 사람들이 참가자로 표시됩니다."
- 평가하기 버튼: 프로그램 상태 `종료` 시 활성화

| 컬럼        | 설명                               |
| ----------- | ---------------------------------- |
| 참가자 이름 |                                    |
| 공고명      |                                    |
| 직무        |                                    |
| 참여 상태   |                                    |
| 평가 점수   | 평가 전: `-`, 평가 후: `{score}점` |

### 2.4 참가자 평가 (`/programs/[id]/evaluate`)

**좌측: 참가자 목록** (선택 가능, 기본: 최상단 행)

**우측: 선택된 참가자 평가 영역**

- 평가 상태: 미완료 / 완료
- 평가 메타: 평가자, 평가 일시 (완료 시만)
- 평가 점수: 기준별 슬라이더 (0 ~ 만점)
- 역할 입력 (선택, 텍스트)
- 평가 코멘트 (선택, 텍스트)
- 참여 상태 (드롭다운, 기본값: 수료)
- 저장하기 → 확인 다이얼로그 → 덮어쓰기 방식

**API:**
| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/admin/programs` | 프로그램 목록 |
| POST | `/admin/programs` | 프로그램 생성 |
| GET | `/admin/programs/:id` | 프로그램 상세 |
| PATCH | `/admin/programs/:id` | 프로그램 수정 |
| DELETE | `/admin/programs/:id` | 프로그램 삭제 |
| GET | `/admin/programs/:id/participants` | 참가자 목록 |
| PUT | `/admin/programs/:id/participants/:userId/evaluate` | 참가자 평가 |

---

## 3. 공고 관리

### 3.1 공고 상태 정책

**게시 상태:** `게시` / `게시하지 않음` (운영자 수동)

**모집 상태:** `모집 예정` / `모집 중` / `모집 종료`

- 시스템 자동 산정 (모집 기간 기준 KST)
- 운영자 수동 변경 가능 (단, 모집 중 전환 시 종료일 > 현재)

**지원 가능 조건:** 게시 = 게시 AND 모집 = 모집 중

### 3.2 공고 목록 (`/announcements`)

**필터:** 모집 상태 (전체/모집예정/모집중/모집종료)

**목록 컬럼:**
썸네일, D-day, 공고명, 직무, 지역, 모집 상태, 게시 상태, 모집 기간, 등록 일시, 등록자, 조회수, 지원자 수 (클릭 가능), 전환율, 복제/삭제 버튼

**인터랙션:**

- 행 클릭 → 수정 화면
- 복제 → 생성 화면 (기존 내용 채움, 이름: `{기존}의 사본`)
- 삭제 → 확인 다이얼로그 (지원서 함께 삭제 경고)

### 3.3 공고 생성 (`/announcements/new`)

**[1] 공고 모집 관리 영역 (필수):**
| 필드 | 기본값 |
|------|--------|
| 게시 상태 | 게시하지 않음 |
| 모집 상태 | 모집 예정 |
| 모집 기간 | 시작일/종료일 |

**[2] 공고 내용 영역 (필수):**
| 필드 | 타입 |
|------|------|
| 프로그램 | 드롭다운 (기존 프로그램 선택) |
| 공고명 | 텍스트 |
| 직무 유형 | 드롭다운 + 직접 입력 |
| 모집 인원 | 자연수 |
| 썸네일 이미지 | 이미지 업로드 |
| 공고 상세 | 텍스트 에디터 (이미지 첨부 가능) |

**[3] 이후 일정 정보 (선택):**

- 결과 발표, 사전 교육, 현장 체류 (텍스트)

**버튼:** 취소하기, 미리보기 (보류), 저장하기

### 3.4 공고 수정 (`/announcements/[id]/edit`)

- 생성 화면과 동일 구조
- 기존 값이 입력 필드에 채워짐

**API:**
| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/admin/announcements` | 공고 목록 |
| POST | `/admin/announcements` | 공고 생성 |
| GET | `/admin/announcements/:id` | 공고 상세 |
| PATCH | `/admin/announcements/:id` | 공고 수정 |
| DELETE | `/admin/announcements/:id` | 공고 삭제 |
| POST | `/admin/announcements/:id/duplicate` | 공고 복제 |

---

## 4. 지원서 관리

### 4.1 지원 상태 정책

| 상태      | 전이 가능 대상                |
| --------- | ----------------------------- |
| 지원 완료 | → 1차 합격, 최종 합격, 불합격 |
| 1차 합격  | → 최종 합격, 불합격           |
| 최종 합격 | ↔ 불합격                      |
| 불합격    | ↔ 1차 합격, 최종 합격         |

- 최종 합격 시 → 참여 활동(Activity) 자동 생성

### 4.2 지원서 목록 (`/applications`)

**필터:**

- 지원 상태 (드롭다운, 복수 선택, OR)
- 공고 (드롭다운, 복수 선택, OR)
- 두 필터 간 AND 조건

**목록 컬럼:**
공고명, 지원 일자, 이름, 성별, 나이, 연락처, 이메일, 지원 상태, 유입 경로, 평가 점수

**정렬:** 지원일시 내림차순
**페이지네이션:** 10건/페이지
**엑셀 다운로드:** 현재 필터 기준 전체 목록

### 4.3 지원서 상세 (`/applications/[id]`)

**상단:** 공고명, 이전/다음 이동 버튼, 닫기

**지원자 프로필:** 프로필 이미지, 이름, 이메일, 연락처, 성별, 나이, 거주지, 활동 상태, 종합 평가 점수

- 프로필 클릭 → 새탭으로 인재 상세 화면

**지원 내용:** 첨부파일 1/2 버튼 → 뷰어 + 다운로드

**지원 상태 변경:** 드롭다운 → 확인 다이얼로그 → 즉시 변경

**지원자 평가:**

- 3개 항목 슬라이더 점수 입력
- 메모 (최대 200자, 선택)
- 저장 버튼

**평가 이력:** 총점, 메모, 평가일자, 평가자, 삭제 버튼

**API:**
| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/admin/applications` | 지원서 목록 |
| GET | `/admin/applications/:id` | 지원서 상세 |
| PATCH | `/admin/applications/:id/status` | 상태 변경 |
| POST | `/admin/applications/:id/evaluations` | 평가 저장 |
| GET | `/admin/applications/:id/evaluations` | 평가 이력 |
| DELETE | `/admin/applications/evaluations/:evalId` | 평가 삭제 |
| GET | `/admin/applications/export` | 엑셀 다운로드 |

---

## 5. 청년 인재 관리

### 5.1 인재 목록 (`/talents`)

**검색:** 이름 기준 텍스트 검색

**필터 (드롭다운, 단일 선택, AND 조건):**

- 활동 상태
- 특정 이력
- 관리 리스크
- 최근 참여 활동 (프로그램 목록)

**목록 컬럼:**
프로필 이미지, 활동 상태, 이름, 성별, 나이, 연락처, 이메일, 거주지, 관심 지역, 희망 직무, 보유 역량, 평가 등급, 특정 이력, 관리 리스크, 최근 참여 활동, 가입 일시, 최근 접속 일시, 계정 상태, 마케팅 동의

**정렬:** 가입일시 내림차순
**페이지네이션:** 10명/페이지
**엑셀 다운로드**

### 5.2 인재 상세 (`/talents/[id]`)

**프로필/직무/계정 정보:** 마이페이지와 유사 (읽기 전용)

**계정 상태 관리:**

- 활성/비활성 토글 버튼 (확인 다이얼로그)
- 탈퇴 처리 버튼

**공고 지원 이력 테이블:** 공고명, 직무, 활동지역, 지원일자, 지원상태

- 행 클릭 → 새탭으로 지원서 상세

**참여 활동 테이블:** 프로그램명, 활동지역, 활동기간, 역할/점수/평가내용, 참여상태

**특정 이력 / 관리 리스크:** 드롭다운 선택

**메모:** 자유 텍스트 입력 + 저장 / 메모 이력 (삭제 가능)

**API:**
| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/admin/talents` | 인재 목록 |
| GET | `/admin/talents/:id` | 인재 상세 |
| PATCH | `/admin/talents/:id/status` | 계정 상태 변경 |
| PATCH | `/admin/talents/:id/tags` | 특정이력/리스크 변경 |
| POST | `/admin/talents/:id/notes` | 메모 작성 |
| GET | `/admin/talents/:id/notes` | 메모 이력 |
| DELETE | `/admin/talents/notes/:noteId` | 메모 삭제 |
| GET | `/admin/talents/export` | 엑셀 다운로드 |

---

## 6. 콘텐츠(인터뷰) 관리

### 6.1 인터뷰 목록 (`/contents`)

**목록:** 썸네일, 제목, 설명, 등록일시, 등록자, 수정/삭제 버튼
**정렬:** 등록일시 내림차순

### 6.2 인터뷰 등록/수정 (`/contents/new`, `/contents/[id]/edit`)

**입력 필드 (모두 필수):**

- 썸네일 이미지 (업로드)
- 제목 (텍스트)
- 내용 (텍스트)
- 링크 (텍스트, 브런치 URL)

**버튼:** 취소하기, 저장하기

**API:**
| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/admin/contents` | 인터뷰 목록 |
| POST | `/admin/contents` | 인터뷰 등록 |
| GET | `/admin/contents/:id` | 인터뷰 상세 |
| PATCH | `/admin/contents/:id` | 인터뷰 수정 |
| DELETE | `/admin/contents/:id` | 인터뷰 삭제 |
